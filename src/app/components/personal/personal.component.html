<app-nav-details></app-nav-details>
<div class="container">
  <form
    [formGroup]="userForm"
    (ngSubmit)="submitForm()"
    id="form"
    class="form-grid"
  >
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>First Name:</mat-label>
      <input
        matInput
        type="text"
        name="fname"
        formControlName="fname"
        placeholder=" "
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('fname')?.touched &&
          userForm.get('fname')?.hasError('required')
        "
      >
        First Name is required
      </mat-error>
      <mat-error
        *ngIf="
          userForm.get('fname')?.touched &&
          userForm.get('fname')?.hasError('minlength')
        "
      >
        Name should be more than 3 characters
      </mat-error>
      <mat-error
        *ngIf="
          userForm.get('fname')?.touched &&
          userForm.get('fname')?.hasError('pattern')
        "
      >
        Name should contain only letters
      </mat-error>
    </mat-form-field>

    <!-- Middle Name -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label
        >Middle Name <span class="optional-label">(Optional):</span></mat-label
      >
      <input
        matInput
        type="text"
        id="mname"
        formControlName="mname"
        placeholder=" "
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('mname')?.touched &&
          userForm.get('mname')?.hasError('pattern')
        "
      >
        Name should contain only letters
      </mat-error>
    </mat-form-field>

    <!-- Last Name -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Last Name (Surname):</mat-label>
      <input
        matInput
        type="text"
        id="lname"
        formControlName="lname"
        placeholder=" "
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('lname')?.touched &&
          userForm.get('lname')?.hasError('required')
        "
      >
        Last Name is required
      </mat-error>
      <mat-error
        *ngIf="
          userForm.get('lname')?.touched &&
          userForm.get('lname')?.hasError('pattern')
        "
      >
        Name should contain only letters
      </mat-error>
    </mat-form-field>

    <!-- Personal Email -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Personal Email:</mat-label>
      <input
        matInput
        type="email"
        id="pemail"
        formControlName="email"
        placeholder=" "
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('email')?.touched &&
          userForm.get('email')?.hasError('required')
        "
      >
        Email is required
      </mat-error>
      <mat-error
        *ngIf="
          userForm.get('email')?.touched &&
          userForm.get('email')?.hasError('pattern')
        "
      >
        Enter a valid email address
      </mat-error>
    </mat-form-field>

    <!-- Gender -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Gender:</mat-label>
      <mat-select formControlName="gender" id="gender" class="input-padding">
        <mat-option value="">Select gender</mat-option>
        <mat-option value="male">Male</mat-option>
        <mat-option value="female">Female</mat-option>
        <mat-option value="other">Other</mat-option>
      </mat-select>
      <mat-error
        *ngIf="
          userForm.get('gender')?.touched &&
          userForm.get('gender')?.hasError('required')
        "
      >
        Gender is required
      </mat-error>
    </mat-form-field>

    <!-- Blood Group -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Blood Group:</mat-label>
      <mat-select
        formControlName="bloodGroup"
        id="bloodg"
        class="input-padding"
      >
        <mat-option value="">Select blood group</mat-option>
        <mat-option value="O+">O+</mat-option>
        <mat-option value="O-">O-</mat-option>
        <mat-option value="A+">A+</mat-option>
        <mat-option value="A-">A-</mat-option>
        <mat-option value="B+">B+</mat-option>
        <mat-option value="B-">B-</mat-option>
        <mat-option value="AB+">AB+</mat-option>
        <mat-option value="AB-">AB-</mat-option>
      </mat-select>
      <mat-error
        *ngIf="
          userForm.get('bloodGroup')?.touched &&
          userForm.get('bloodGroup')?.hasError('required')
        "
      >
        Blood Group is required
      </mat-error>
    </mat-form-field>

    <!-- DOB -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>DOB:</mat-label>
      <input
        matInput
        [matDatepicker]="picker"
        formControlName="dob"
        placeholder="DD-MM-YYYY"
        class="input-padding"
        (focus)="picker.open()"
        readonly
      />
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>

      <mat-error *ngIf="userForm.get('dob')?.touched">
        <span *ngIf="userForm.get('dob')?.hasError('required')"
          >DOB is required</span
        >
        <span *ngIf="userForm.get('dob')?.hasError('minAge')">
          You must be at least 15 years old. Your age is
          {{ userForm.get('dob')?.errors?.['minAge'].actualAge }}.
        </span>
      </mat-error>
    </mat-form-field>

    <!-- Marital Status -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Marital Status:</mat-label>
      <mat-select formControlName="marital" id="marital" class="input-padding">
        <mat-option value="">Select status</mat-option>
        <mat-option value="single">Single</mat-option>
        <mat-option value="married">Married</mat-option>
        <mat-option value="divorced">Divorced</mat-option>
      </mat-select>
      <mat-error
        *ngIf="
          userForm.get('marital')?.touched &&
          userForm.get('marital')?.hasError('required')
        "
      >
        Marital Status is required
      </mat-error>
    </mat-form-field>

    <!-- Marriage Date -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Marriage Date:</mat-label>
      <input
        matInput
        [matDatepicker]="marriagePicker"
        id="marriegedate"
        formControlName="marriegedate"
        placeholder="Select marriage date"
        class="input-padding"
        (focus)="marriagePicker.open()"
        readonly
      />
      <!-- readonly to prevent manual typing -->
      <mat-datepicker-toggle
        matSuffix
        [for]="marriagePicker"
      ></mat-datepicker-toggle>
      <mat-datepicker #marriagePicker></mat-datepicker>
      <mat-error
        *ngIf="
          userForm.get('marriegedate')?.touched &&
          userForm.get('marriegedate')?.hasError('required')
        "
      >
        Marriage Date is required
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width custom-form-field">
      <mat-label>Current Address</mat-label>
      <textarea
        class="input-padding"
        matInput
        placeholder="Enter current address"
        formControlName="current_address"
        rows="3"
      ></textarea>
      <mat-error
        *ngIf="
          userForm.get('current_address')?.touched &&
          userForm.get('current_address')?.hasError('required')
        "
      >
        Current Address is required
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Current Country</mat-label>
      <mat-select
        formControlName="current_country"
        [(value)]="current_countryValue"
        class="input-padding"
      >
        <mat-option value="">Select</mat-option>
        <mat-option value="india">India</mat-option>
        <mat-option value="nepal">Nepal</mat-option>
        <mat-option value="usa">USA</mat-option>
        <mat-option value="russia">Russia</mat-option>
        <mat-option value="bangladesh">Bangladesh</mat-option>
        <mat-option value="other">Other</mat-option>
      </mat-select>
      <mat-error
        *ngIf="
          userForm.get('current_country')?.touched &&
          userForm.get('current_country')?.hasError('required')
        "
      >
        Current Country is required
      </mat-error>
    </mat-form-field>

    <!-- Show when "Other" country is selected -->
    <mat-form-field
      appearance="outline"
      *ngIf="current_countryValue === 'other'"
      class="custom-form-field"
    >
      <mat-label>Country Name</mat-label>
      <input
        matInput
        type="text"
        id="other_country"
        formControlName="other_country"
        placeholder="Enter country"
        class="input-padding"
      />
    </mat-form-field>

    <!-- Current State -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>State</mat-label>
      <input
        matInput
        type="text"
        id="current_state"
        formControlName="current_state"
        placeholder="State"
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('current_state')?.touched &&
          userForm.get('current_state')?.hasError('required')
        "
      >
        Current state is required
      </mat-error>
    </mat-form-field>

    <!-- Current City -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>City</mat-label>
      <input
        matInput
        type="text"
        id="current_city"
        formControlName="current_city"
        placeholder="City"
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('current_city')?.touched &&
          userForm.get('current_city')?.hasError('required')
        "
      >
        Current city is required
      </mat-error>
    </mat-form-field>

    <!-- Current Pincode -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Pincode</mat-label>
      <input
        matInput
        type="number"
        id="current_pincode"
        formControlName="current_pincode"
        placeholder="ex.808080"
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('current_pincode')?.touched &&
          userForm.get('current_pincode')?.hasError('required')
        "
      >
        Pincode is required
      </mat-error>
      <mat-error
        *ngIf="
          userForm.get('current_pincode')?.touched &&
          userForm.get('current_pincode')?.hasError('pattern')
        "
      >
        Enter a valid 6-digit pincode
      </mat-error>
    </mat-form-field>

    <!-- Current Contact -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Contact Number</mat-label>
      <input
        matInput
        type="number"
        id="current_contact"
        formControlName="current_contact"
        placeholder="9876543210"
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('current_contact')?.touched &&
          userForm.get('current_contact')?.hasError('required')
        "
      >
        Contact number is required
      </mat-error>
      <mat-error
        *ngIf="
          userForm.get('current_contact')?.touched &&
          userForm.get('current_contact')?.hasError('pattern')
        "
      >
        Enter a valid 10-digit number
      </mat-error>
    </mat-form-field>

    <!-- Permanent Address with "Same as Above" -->
    <br />
    <div class="full-width">
      <label class="checkbox-label full-width">
        <mat-checkbox
          [checked]="copyAddressChecked"
          (change)="copyCurrentToPermanent($event)"
        >
          Same as Above
        </mat-checkbox>
      </label>
    </div>

    <mat-form-field appearance="outline" class="full-width custom-form-field">
      <mat-label>Permanent Address</mat-label>
      <textarea
        class="input-padding"
        id="permanent_address"
        matInput
        placeholder="Permanent Address"
        formControlName="permanent_address"
        rows="3"
        class="input-padding"
      ></textarea>
      <mat-error
        *ngIf="
          userForm.get('permanent_address')?.touched &&
          userForm.get('permanent_address')?.hasError('required')
        "
      >
        Permanent address is required
      </mat-error>
    </mat-form-field>

    <!-- Permanent Country -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Permanent Country</mat-label>
      <mat-select
        formControlName="permanent_country"
        id="permanent_country"
        class="input-padding"
      >
        <mat-option value="">Select</mat-option>
        <mat-option value="india">India</mat-option>
        <mat-option value="nepal">Nepal</mat-option>
        <mat-option value="usa">USA</mat-option>
        <mat-option value="russia">Russia</mat-option>
        <mat-option value="bangladesh">Bangladesh</mat-option>
      </mat-select>
      <mat-error
        *ngIf="
          userForm.get('permanent_country')?.touched &&
          userForm.get('permanent_country')?.hasError('required')
        "
      >
        Permanent country is required
      </mat-error>
    </mat-form-field>

    <!-- Permanent State -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>State</mat-label>
      <input
        matInput
        type="text"
        formControlName="permanent_state"
        placeholder="State"
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('permanent_state')?.touched &&
          userForm.get('permanent_state')?.hasError('required')
        "
      >
        Permanent state is required
      </mat-error>
    </mat-form-field>

    <!-- Permanent City -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>City</mat-label>
      <input
        matInput
        type="text"
        formControlName="permanent_city"
        placeholder="City"
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('permanent_city')?.touched &&
          userForm.get('permanent_city')?.hasError('required')
        "
      >
        Permanent city is required
      </mat-error>
    </mat-form-field>

    <!-- Permanent Pincode -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Pincode</mat-label>
      <input
        matInput
        type="number"
        formControlName="permanent_pincode"
        placeholder="e.g. 808080"
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('permanent_pincode')?.touched &&
          userForm.get('permanent_pincode')?.hasError('required')
        "
      >
        Permanent pincode is required
      </mat-error>
      <mat-error
        *ngIf="
          userForm.get('permanent_pincode')?.touched &&
          userForm.get('permanent_pincode')?.hasError('pattern')
        "
      >
        Enter a valid 6-digit pincode
      </mat-error>
    </mat-form-field>

    <!-- Permanent Contact Number -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Permanent Contact Number</mat-label>
      <input
        matInput
        type="number"
        formControlName="permanent_contact"
        placeholder="Permanent Number"
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('permanent_contact')?.touched &&
          userForm.get('permanent_contact')?.hasError('required')
        "
      >
        Permanent contact is required
      </mat-error>
      <mat-error
        *ngIf="
          userForm.get('permanent_contact')?.touched &&
          userForm.get('permanent_contact')?.hasError('pattern')
        "
      >
        Enter a valid 10-digit number
      </mat-error>
    </mat-form-field>

    <!-- BCP Address -->
    <mat-form-field appearance="outline" class="full-width custom-form-field">
      <mat-label>BCP Work Address (with Landmark)</mat-label>
      <textarea
        matInput
        placeholder="BCP Address"
        formControlName="bcp_address"
        class="input-padding"
      ></textarea>
      <mat-error
        *ngIf="
          userForm.get('bcp_address')?.touched &&
          userForm.get('bcp_address')?.hasError('required')
        "
      >
        BCP address is required
      </mat-error>
    </mat-form-field>

    <!-- BCP Country -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Country</mat-label>
      <mat-select formControlName="bcp_country" class="input-padding">
        <mat-option value="">Select</mat-option>
        <mat-option value="india">India</mat-option>
        <mat-option value="nepal">Nepal</mat-option>
        <mat-option value="usa">USA</mat-option>
        <mat-option value="russia">Russia</mat-option>
        <mat-option value="bangladesh">Bangladesh</mat-option>
      </mat-select>
      <mat-error
        *ngIf="
          userForm.get('bcp_country')?.touched &&
          userForm.get('bcp_country')?.hasError('required')
        "
      >
        BCP country is required
      </mat-error>
    </mat-form-field>

    <!-- BCP State -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>State</mat-label>
      <input
        matInput
        type="text"
        placeholder="State"
        formControlName="bcp_state"
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('bcp_state')?.touched &&
          userForm.get('bcp_state')?.hasError('required')
        "
      >
        BCP state is required
      </mat-error>
    </mat-form-field>

    <!-- BCP City -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>City</mat-label>
      <input
        matInput
        type="text"
        placeholder="City"
        formControlName="bcp_city"
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('bcp_city')?.touched &&
          userForm.get('bcp_city')?.hasError('required')
        "
      >
        BCP city is required
      </mat-error>
    </mat-form-field>

    <!-- BCP Pincode -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Pincode</mat-label>
      <input
        matInput
        type="number"
        placeholder="e.g. 808080"
        formControlName="bcp_pincode"
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('bcp_pincode')?.touched &&
          userForm.get('bcp_pincode')?.hasError('required')
        "
      >
        BCP pincode is required
      </mat-error>
      <mat-error
        *ngIf="
          userForm.get('bcp_pincode')?.touched &&
          userForm.get('bcp_pincode')?.hasError('pattern')
        "
      >
        Enter a valid 6-digit pincode
      </mat-error>
    </mat-form-field>

        <!-- Relevant Experience (Years) -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Relevant Experience (Years)</mat-label>
      <mat-select formControlName="relevantYear" class="input-padding">
        <mat-option value="">Select year</mat-option>
        <mat-option
          *ngFor="let y of [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]"
          [value]="y"
          >{{ y }}</mat-option
        >
      </mat-select>
      <mat-error
        *ngIf="
          userForm.get('relevantYear')?.touched &&
          userForm.get('relevantYear')?.hasError('required')
        "
      >
        Relevant year is required
      </mat-error>
    </mat-form-field>

    <!-- Previous Experience (Years) -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Previous Experience (Years)</mat-label>
      <mat-select formControlName="exp_year" class="input-padding">
        <mat-option value="">Select year</mat-option>
        <mat-option
          *ngFor="let y of [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]"
          [value]="y"
          >{{ y }}</mat-option
        >
      </mat-select>
      <mat-error
        *ngIf="
          userForm.get('exp_year')?.touched &&
          userForm.get('exp_year')?.hasError('required')
        "
      >
        Year is required
      </mat-error>
    </mat-form-field>

    <!-- Previous Experience (Months) -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Previous Experience (Months)</mat-label>
      <mat-select formControlName="exp_month" class="input-padding">
        <mat-option value="">Select month</mat-option>
        <mat-option
          *ngFor="let m of [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]"
          [value]="m"
          >{{ m }}</mat-option
        >
      </mat-select>
      <mat-error
        *ngIf="
          userForm.get('exp_month')?.touched &&
          userForm.get('exp_month')?.hasError('required')
        "
      >
        Month is required
      </mat-error>
    </mat-form-field>

    <!-- Emergency Contact Name & Address -->
    <mat-form-field appearance="outline" class="full-width custom-form-field">
      <mat-label>Emergency Contact Name & Address</mat-label>
      <textarea
        matInput
        placeholder="Emergency Contact Name & Address"
        formControlName="emergency_contact_name"
        class="input-padding"
      ></textarea>
      <mat-error
        *ngIf="
          userForm.get('emergency_contact_name')?.touched &&
          userForm.get('emergency_contact_name')?.hasError('required')
        "
      >
        Emergency contact name is required
      </mat-error>
    </mat-form-field>

    <!-- Emergency Contact Number -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Emergency Contact Number</mat-label>
      <input
        matInput
        type="number"
        placeholder="Emergency Number"
        formControlName="emergency_contact_number"
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('emergency_contact_number')?.touched &&
          userForm.get('emergency_contact_number')?.hasError('required')
        "
      >
        Emergency contact number is required
      </mat-error>
    </mat-form-field>

    <!-- Relationship with Employee -->
    <mat-form-field appearance="outline" class="custom-form-field">
      <mat-label>Relationship with Employee</mat-label>
      <input
        matInput
        type="text"
        placeholder="Relationship with Employee"
        formControlName="emergency_relationship"
        class="input-padding"
      />
      <mat-error
        *ngIf="
          userForm.get('emergency_relationship')?.touched &&
          userForm.get('emergency_relationship')?.hasError('required')
        "
      >
        Emergency relationship is required
      </mat-error>
      <mat-error
        *ngIf="
          userForm.get('emergency_relationship')?.touched &&
          userForm.get('emergency_relationship')?.hasError('pattern')
        "
      >
        Name should contain only letters
      </mat-error>
    </mat-form-field>


    <div class="full-width button-group">
      <button type="submit" class="update-button">Next &raquo;</button>
    </div>
  </form>
</div>
