<div class="timesheet-classic-container">
  <!-- Dropdown Section -->
  <div class="classic-dropdown-section">
    <div class="classic-form-group">
      <label for="year">Year:</label>
      <select
        id="year"
        name="year"
        [(ngModel)]="timelog.year"
        (change)="onMonthOrYearChange()"
        required
      >
        <option *ngFor="let y of years" [value]="y">{{ y }}</option>
      </select>
    </div>

    <div class="classic-form-group">
      <label for="month">Month:</label>
      <select
        id="month"
        name="month"
        [(ngModel)]="timelog.month"
        (change)="onMonthOrYearChange()"
        required
      >
        <option value="" disabled>Select Month</option>
        <option *ngFor="let m of months" [value]="m">{{ m }}</option>
      </select>
    </div>

    <div class="classic-form-group">
      <label for="weekendDate">Select Week (Monday):</label>
      <select
        id="weekendDate"
        name="weekendDate"
        [(ngModel)]="timelog.weekendDate"
        (change)="onWeekendDateSelect()"
        required
      >
        <option value="" disabled>Select Monday</option>
        <option
          *ngFor="let date of weekendDates"
          [value]="date"
          [disabled]="isWeekendDateDisabled(date) && !isAdmin"
        >
          {{ date }} <span *ngIf="isWeekendDateDisabled(date) && !isAdmin">(Not available)</span>
        </option>
      </select>
    </div>

    <div class="classic-form-group">
      <label for="employeeName">Employee Name:</label>
      <input
        type="text"
        id="employeeName"
        name="employeeName"
        [(ngModel)]="timelog.employeeName"
        readonly
      />
    </div>

    <div class="classic-form-group">
      <label for="employeeId">Employee ID:</label>
      <input
        type="text"
        id="employeeId"
        name="employeeId"
        [(ngModel)]="timelog.employeeId"
        readonly
      />
    </div>
  </div>

  <!-- Latest Entry -->
  <div *ngIf="latestEntry && isUser" class="latest-entry-section">
    <h3>Latest Submitted Entry (Current Week)</h3>
    <table class="classic-table">
      <thead>
        <tr>
          <th>Project</th>
          <th>Total Hrs.</th>
          <th>Description</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ latestEntry.project }}</td>
          <td>{{ latestEntry.totalhours }}</td>
          <td>{{ latestEntry.description }}</td>
          <td>
            <span [ngClass]="{
              'status-pending': latestEntry.status === 'Pending',
              'status-approved': latestEntry.status === 'Approved',
              'status-rejected': latestEntry.status === 'Rejected'
            }">{{ latestEntry.status }}</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Accordion -->
  <div class="classic-accordion">
    <!-- Timesheet Summary -->
    <div class="accordion-item">
      <h2 class="accordion-header" (click)="toggleAccordion(0)">Timesheet Summary</h2>
      <div class="accordion-content" *ngIf="accordionState[0]">
        <table class="classic-table">
          <thead>
            <tr>
              <th>Employee Name</th>
              <th>Employee ID</th>
              <th>Project</th>
              <th>Week End Date</th>
              <th>Total Hrs.</th>
              <th>Description</th>
              <th>Status</th>
              <th *ngIf="isAdmin">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let entry of timelogSummary">
              <td>{{ entry.employeeName }}</td>
              <td>{{ entry.employeeId }}</td>
              <td>{{ entry.project }}</td>
              <td>{{ entry.weekendDate }}</td>
              <td>{{ entry.totalhours }}</td>
              <td>{{ entry.description }}</td>
              <td>
                <span [ngClass]="{
                  'status-pending': entry.status === 'Pending',
                  'status-approved': entry.status === 'Approved',
                  'status-rejected': entry.status === 'Rejected'
                }">{{ entry.status }}</span>
              </td>
              <td *ngIf="isAdmin">
                <button
                  *ngIf="entry.status !== 'Approved'"
                  class="action-btn approve-btn"
                  (click)="updateTimesheetStatus(entry, 'Approved')"
                >
                  Approve
                </button>
                <button
                  *ngIf="entry.status !== 'Rejected'"
                  class="action-btn reject-btn"
                  (click)="updateTimesheetStatus(entry, 'Rejected')"
                >
                  Reject
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Fill Your Timesheet -->
    <div class="accordion-item">
      <h2 class="accordion-header" (click)="toggleAccordion(2)">Fill Your Timesheet</h2>
      <div class="accordion-content" *ngIf="accordionState[2]">
        <form #timelogForm="ngForm" (ngSubmit)="onSubmit(timelogForm)">
          <table class="classic-table">
            <thead>
              <tr>
                <th>Project</th>
                <th>Monday</th>
                <th>Tuesday</th>
                <th>Wednesday</th>
                <th>Thursday</th>
                <th>Friday</th>
                <th>Total Hrs.</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <select
                    name="project"
                    [(ngModel)]="timelogEntry.project"
                    required
                  >
                    <option value="" disabled>Select Project</option>
                    <option>Project Alpha</option>
                    <option>Project Beta</option>
                    <option>Project 1</option>
                    <option>Project 2</option>
                  </select>
                </td>
                <td *ngFor="let day of ['Monday','Tuesday','Wednesday','Thursday','Friday']">
                  <select
                    [name]="'hours' + day"
                    [(ngModel)]="timelogEntry.hours![day]"
                    (change)="calculateTotalHours()"
                    required
                  >
                    <option value="">--</option>
                    <option value="WFO">WFO</option>
                    <option value="WFH">WFH</option>
                    <option value="Leave">Leave</option>
                    <option value="Holiday">Holiday</option>
                  </select>
                </td>
                <td>
                  <input
                    type="text"
                    name="totalHours"
                    [value]="timelogEntry.totalhours"
                    readonly
                  />
                </td>
                <td>
                  <input
                    type="text"
                    name="description"
                    [(ngModel)]="timelogEntry.description"
                    required
                  />
                </td>
              </tr>
            </tbody>
          </table>
          <br />
          <button
            type="submit"
            class="submit-btn"
            [disabled]="!timelogForm.valid || isFutureOrPastDateSelected"
          >
            Submit
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
